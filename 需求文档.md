## 目标:作为gate和lbank平台的量化交易bot开发
### 描述
我想要在lbank与gate两个交易所之间进行货币套利，如配置文件参考如下：
```yaml
app:
  base_currency: USDT
  cool_down_sec: 2
  initial_budget_usdt: 5.0
  max_slippage_bps: 10
  min_profit_usdt: 0.05
  min_spread_bps: 30
  mode: live
  price_source: book_ticker
  reinvest_mode: principal
  signal_ttl_ms: 800
  symbols:
  - DOGE/USDT
  - TBC/USDT
  - AIC/USDT
  tif: IOC
exchanges:
  gate:
    account_type: spot
    base_url: https://api.gateio.ws/api/v4
    fee_bps:
      maker: 20
      taker: 20
    min_order_usdt: 3
    recv_window_ms: 5000
    use_sdk: true
    ws_url: wss://api.gateio.ws/ws/v4/
  lbank:
    base_url: https://api.lbkex.com
    fee_bps:
      maker: 10
      taker: 20
    recv_window_ms: 5000
    use_sdk: false
    ws_public: wss://www.lbkex.net/ws/V2/
logging:
  level: INFO
  path: arbitrage.log
notify:
  telegram:
    bot_token: ''
    chat_id: ''
    enable: false
risk:
  max_latency_ms: 2000
  max_open_orders_per_side: 1
  max_open_pairs: 1
  pnl_floor_usdt: -5
  stop_on_error: true
transfers:
  addresses:
    gate:
      DOGE:
        DOGE: ''
      USDT:
        BSC: ''
        TRX: ''
    lbank:
      DOGE:
        DOGE: ''
      USDT:
        BSC: ''
        TRX: ''
  enable: true
  max_pending_minutes: 15
  stablecoin: USDT
  usdt_chain_priority:
  - BSC
  - TRX
  - ARB
  - ETH
  withdraw_cooldown_sec: 60
```

如上参数有些多余的，可以尽量省略。最终实现目标就是指定货币进行套利。循环套利，单次套利，本息套利，本金套利。等选择

服务菜单列表：
1. 🔍 状态检查
2. 📊 套利查询 (查看价差排行)
3. 📝 配置套利信息
4. ⚡ 执行套利
5. 📝 交易日志 (查看最近日志)
6. 🌐 获取当前IP (白名单用)
7. 🌍 代理配置管理
8. 🚪 退出系统

解释：

1. 🔍 状态检查：是为了检测两个平台的key是否有效，是否能够成功请求到lbank和gate平台
2. 📊 套利查询 (查看价差排行)：是为了对比两个平台，是否有套利空间，套利利润百分比多少。如：TBC   4.6%（lbank->gate）
3. 📝 配置套利信息：引导用户完成配置文件信息，如：blank平台RSA apikey,秘钥，gate平台key，秘钥信息，基础货币：USDT，套利货币（引导多个用;隔开）：TBC/USDT;DOGE/USDT，做小交易滑点：0.1，最大交易滑点：100，其他参数可以默认，此处简约配置即可。更多配置引导用户在config.yaml配置。
4. ⚡ 执行套利：子菜单：a、查询套利列表并选择套利。b、指定套利货币，若配置文件中缺少：“symbols”则需用户填写套利货币，并获取form-paltform方的货币对信息进行校对，不存在则提示 套利货币种类输入有误。正确则开始执行套利，并显示套利日志
5. 📝 交易日志 (查看最近日志)：可查询历史套利日志信息。
6. 🌐 获取当前IP (白名单用)：根据配置代理，若无代理根据当前环境确定当前环境IP，用于给交易所平台配置白名单。
7. 🌍 代理配置管理：用于配置全局请求接口时采用的代理IP
8. 🚪 退出系统：结束服务



### 目标
####  1.我有conda,请使用conda创建一个makeMoneyBot环境，并切换此环境，配置环境所需插件
####  2.构建基础配置文件config.yaml文件，主要参考描述中的配置参考，尽量简约，舍弃不需要的配置。

​	lbank rest api,初始化检测时优先使用第一个，不通过则自动切换第二个以此类推:

```
REST API
https://www.lbkex.net/
https://api.lbkex.com/
https://api.lbank.info/

webSocket api
wss://www.lbkex.net/ws/V2/
```

​	gate rest api,初始地址
```
https://api.gateio.ws/api/v4
```



#### 3.MEXC SDK调用方法，接口文档如下

##### (1).基本信息

###### 接入URL

请选用以下的baseurl进行API请求：

- `https://api.mexc.com`

###### HTTP 返回代码

- HTTP 4XX 错误码用于指示错误的请求内容、行为、格式。问题在于请求者。
- HTTP 401 表示身份认证、权限错误。
- HTTP 403 错误码表示违反WAF限制(Web应用程序防火墙)。
- HTTP 429 错误码表示警告访问频次超限，即将被封IP。
- HTTP 5XX 错误码用于指示MEXC服务端的问题。



###### 请求格式

相应API接受GET，POST或DELETE类型的请求

- GET 方法的接口, 参数必须在 query string中发送。
- POST, PUT, 和 DELETE 方法的接口,参数可以在内容形式为application/x-www-form-urlencoded的 query string 中发送，也可以在 request body 中以application/json的形式发送。如果你喜欢，也可以混合这两种方式发送参数。
- 对参数的顺序不做要求。但如果同一个参数名在query string和request body中都有，query string中的会被优先采用。



###### 返回格式

所有接口的返回数据均为JSON形式

###### Header操作的组成

请求Header中签名相关参数

| 组成部分        | 说明                  |
| :-------------- | :-------------------- |
| `X-MEXC-APIKEY` | API key中的access key |
| `Content-Type`  | `application/json`    |

###### 签名

- 调用SIGNED接口时，除了接口本身所需的参数外，还需要在query string 或 request body中传递 signature, 即签名参数（在批量操作的API中，若参数值中有逗号等特殊符号，这些符号在签名时需要做URL encode，注意**encode只支持大写**）。
- 签名使用HMAC SHA256算法. API-KEY所对应的API-Secret作为 HMAC SHA256 的密钥，其他所有参数作为HMAC SHA256的操作对象，得到的输出即为签名。
- 签名 **目前只支持小写**。
- "totalParams"定义为与"request body"串联的"query string"。

######  时间安全

> 伪代码示例

```text
 if (timestamp < (serverTime + 1000) && (serverTime - timestamp) <= recvWindow)
  {
    // process request
  } 
  else 
  {
    // reject request
  }
```



- 签名接口均需要传递timestamp参数，其值应当是请求发送时刻的unix时间戳(毫秒)。
- 服务器收到请求时会判断请求中的时间戳，如果是5000毫秒之前发出的，则请求会被认为无效。这个时间空窗值可以通过发送可选参数recvWindow来定义。

关于交易时效性互联网状况并不完全稳定可靠,因此你的程序本地到MEXC服务器的时延会有抖动。这是我们设置recvWindow的目的所在，如果你从事高频交易，对交易时效性有较高的要求，可以灵活设置recvWindow以达到你的要求。

推荐使用5秒以下的 recvWindow! 最多不能超过 60秒!

###### POST /api/v3/order 举例

> Example 1

```shell
HMAC SHA256 signature:

    $ echo -n "symbol=BTCUSDT&side=BUY&type=LIMIT&quantity=1&price=11&recvWindow=5000&timestamp=1644489390087" | openssl dgst -sha256 -hmac "45d0b3c26f2644f19bfb98b07741b2f5"
    (stdin)= 323c96ab85a745712e95e63cad28903dd8292e4a905e99c4ee3932023843a117
```



```shell
curl command:

    (HMAC SHA256)
    $ curl -H "X-MEXC-APIKEY: mx0aBYs33eIilxBWC5" -X POST 'https://api.mexc.com/api/v3/order' -d 'symbol=BTCUSDT&side=BUY&type=LIMIT&quantity=1&price=11&recvWindow=5000&timestamp=1644489390087&signature=323c96ab85a745712e95e63cad28903dd8292e4a905e99c4ee3932023843a117'
```



> Example 2

```shell
HMAC SHA256 signature:

    $ echo -n "symbol=BTCUSDT&side=BUY&type=LIMIT&quantity=1&price=11&recvWindow=5000&timestamp=1644489390087" | openssl dgst -sha256 -hmac "45d0b3c26f2644f19bfb98b07741b2f5"
    (stdin)= fd3e4e8543c5188531eb7279d68ae7d26a573d0fc5ab0d18eb692451654d837a
```



```shell
curl command:

    (HMAC SHA256)
    $ curl -H "X-MEXC-APIKEY: mx0aBYs33eIilxBWC5" -X POST 'https://api.mexc.com/api/v3/order' -d 'symbol=BTCUSDT&side=BUY&type=LIMIT&quantity=1&price=11&recvWindow=5000&timestamp=1644489390087&signature=fd3e4e8543c5188531eb7279d68ae7d26a573d0fc5ab0d18eb692451654d837a'
```



> Example 3

```shell
HMAC SHA256 signature:

    $ echo -n "symbol=BTCUSDT&side=BUY&type=LIMITquantity=1&price=11&recvWindow=5000&timestamp=1644489390087" | openssl dgst -sha256 -hmac "45d0b3c26f2644f19bfb98b07741b2f5"
    (stdin)= d1a676610ceb39174c8039b3f548357994b2a34139a8addd33baadba65684592
```



```shell
curl command:

    (HMAC SHA256)
    $ curl -H "X-MEXC-APIKEY: mx0aBYs33eIilxBWC5" -X POST 'https://api.mexc.com/api/v3/order?symbol=BTCUSDT&side=BUY&type=LIMIT' -d 'quantity=1&price=11&recvWindow=5000&timestamp=1644489390087&signature=d1a676610ceb39174c8039b3f548357994b2a34139a8addd33baadba65684592'
```



以下是在linux bash环境下使用 echo openssl 和curl工具实现的一个调用接口下单的示例 apikey、secret仅供示范

| Key       | Value                            |
| :-------- | :------------------------------- |
| apiKey    | mx0aBYs33eIilxBWC5               |
| secretKey | 45d0b3c26f2644f19bfb98b07741b2f5 |

| 参数       | 取值          |
| :--------- | :------------ |
| symbol     | BTCUSDT       |
| side       | BUY           |
| type       | LIMIT         |
| quantity   | 1             |
| price      | 11            |
| recvWindow | 5000          |
| timestamp  | 1644489390087 |

**示例 1: 所有参数通过 request body 发送**

- requestBody: symbol=BTCUSDT&side=BUY&type=LIMIT&quantity=1&price=11&recvWindow=5000&timestamp=1644489390087

**所有参数通过 query string 发送**

- queryString: symbol=BTCUSDT&side=BUY&type=LIMIT&quantity=1&price=11&recvWindow=5000&timestamp=1644489390087

**示例 3: 混合使用 query string 和 request body**

- queryString: symbol=BTCUSDT&side=BUY&type=LIMIT
- requestBody: quantity=1&price=11&recvWindow=5000&timestamp=1644489390087

请注意，签名与示例3不同。 "LIMIT"和"quantity = 1"之间没有＆。

###### 限频规则

对REST API的访问有频率限制，当超出限制时，返回状态429：请求过于频繁。

需要携带access key进行访问的接口，以账号作为限速的基本单位；不需要携带access key进行访问的接口，以IP作为限速的基本单位。

###### 限频说明

- 每个接口会标明是按照IP或者按照UID统计, 以及相应请求一次的权重值。不同接口拥有不同的权重，越消耗资源的接口权重就会越大。
- **按IP和按UID(account)两种模式分别统计, 两者互相独立。按IP权重限频的接口，所有接口共用500权重/10秒；按UID权重限频的接口，所有接口共用500权重/10秒。**

###### 超频报错

- 收到429时，您有责任停止发送请求，不得滥用API。
- **收到429后仍然继续违反访问限制，会被封禁IP。**
- 频繁违反限制，封禁时间会逐渐延长，**从最短2分钟到最长3天**。
- `Retry-After`的头会与带有418或429的响应发送，并且会给出**以秒为单位**的等待时长(如果是429)以防止禁令，或者如果是418，直到禁令结束。

###### WEBSOCKET 连接限制

- Websocket服务器访问频率限制为：100次/s。
- 如果用户发送的消息超过限制，连接会被断开连接。反复被断开连接的IP有可能被服务器屏蔽。
- 单个连接最多可以订阅 30 个Streams。

###### 错误码

以下为接口可能返回的错误码信息

| 错误码 | 说明                                                         |
| ------ | ------------------------------------------------------------ |
| -2011  | 未知订单                                                     |
| 26     | 该操作不允许                                                 |
| 400    | 需要APIKEY                                                   |
| 401    | 未授权                                                       |
| 403    | 访问被拒                                                     |
| 429    | 请求过多                                                     |
| 500    | 内部错误                                                     |
| 503    | 服务不可用，请重试                                           |
| 504    | 网关超时                                                     |
| 602    | 签名认证失败                                                 |
| 10001  | 用户不存在                                                   |
| 10007  | 该交易对不支持api交易                                        |
| 10015  | 用户id不能为空                                               |
| 10072  | 无效的access key                                             |
| 10073  | 无效的请求时间                                               |
| 10095  | 金额不能为空                                                 |
| 10096  | 金额小数位过大                                               |
| 10097  | 金额错误                                                     |
| 10098  | 因风控原因，无法划转，请稍后重试                             |
| 10099  | 子站账号未开通                                               |
| 10100  | 不支持该币种划转                                             |
| 10101  | 资产余额不足                                                 |
| 10102  | 金额不能为零或负数                                           |
| 10103  | 不支持该账户划转                                             |
| 10200  | 转账操作处理中                                               |
| 10201  | 用户资金入账失败                                             |
| 10202  | 用户资金出账失败                                             |
| 10206  | 转账关闭                                                     |
| 10211  | 禁止提现                                                     |
| 10212  | 提币地址不是常用地址或已失效                                 |
| 10216  | 没有可用地址，请稍后再试                                     |
| 10219  | 资产流水写入失败请重新尝试                                   |
| 10222  | 币种不能为空                                                 |
| 10232  | 币种不存在                                                   |
| 10259  | 未配置中间账户错误                                           |
| 10265  | 由于风控原因，暂不支持提币，请稍后再试                       |
| 10268  | 备注长度过大                                                 |
| 20001  | 不支持此子系统                                               |
| 20002  | 内部系统调用错误                                             |
| 22222  | 记录不存在                                                   |
| 30000  | 交易对暂停交易                                               |
| 30001  | 当前交易方向不允许下单                                       |
| 30002  | 最小交易量不能小过                                           |
| 30003  | 最大交易量不能大过                                           |
| 30004  | 持仓不足                                                     |
| 30005  | 卖出超过持仓                                                 |
| 30010  | 无效价格                                                     |
| 30014  | 无效交易对                                                   |
| 30016  | 无法交易                                                     |
| 30018  | 暂不支持市价单                                               |
| 30019  | 暂不支持API市价单                                            |
| 30020  | 该交易对不支持api                                            |
| 30021  | 无效交易对                                                   |
| 30025  | 不存在的对手订单                                             |
| 30026  | 无效的订单id                                                 |
| 30027  | 该货币已达到最大持仓限制，买入暂停                           |
| 30028  | 货币触发平台风控，抛售暂停                                   |
| 30029  | 不能超过最大订单限制                                         |
| 30032  | 不能超过最大仓位                                             |
| 30041  | 目前的订单类型不支持下单                                     |
| 33333  | 参数错误                                                     |
| 44444  | 参数不能为空                                                 |
| 60005  | 您的账号存在异常，暂时无法进行法币交易，请联系客服或稍后再试 |
| 70011  | 交易对不支持api交易                                          |
| 700001 | apikey格式错误                                               |
| 700002 | 签名无效                                                     |
| 700003 | 此请求的时间戳在 recvWindow 之外                             |
| 700004 | 参数'origClientOrderId' 或 'orderId'至少需要一个             |
| 700005 | recvWindow 必须小于 60000                                    |
| 700006 | IP非白名单                                                   |
| 700007 | 没有访问端点的权限                                           |
| 700008 | 参数中有无效字节                                             |
| 730000 | 请求失败,请联系客服人员                                      |
| 730001 | 用户信息错误                                                 |
| 730002 | 参数错误,请检查                                              |
| 730003 | 不支持的操作,请联系客服人员                                  |
| 730100 | 用户状态异常                                                 |
| 730600 | 子账户名称不能为空                                           |
| 730601 | 子账户必须是8-32位字母和数字组合                             |
| 730602 | 子账户备注不能为空                                           |
| 730700 | 备注不能为空                                                 |
| 730701 | 权限不能为空                                                 |
| 730702 | API KEY权限不存在                                            |
| 730703 | IP信息错误,超过最大绑定IP数量                                |
| 730704 | 绑定的IP格式错误,请重新填写                                  |
| 730705 | 最多允许创建30组Api Key                                      |
| 730706 | API KEY 信息不存在                                           |
| 730707 | accessKey不能为空                                            |
| 730101 | 用户名已存在                                                 |
| 140001 | 子账号不存在                                                 |
| 140002 | 禁止子账号访问                                               |



##### (2)、钱包接口

###### 查询币种信息

返回币种详细信息以及智能合约地址

> 请求示例

```text
Get /api/v3/capital/config/getall
```



> 返回示例

```json
[
  {
    "coin": "EOS",
    "name": "EOS",
    "networkList": [
      {
          "coin": "EOS",
          "depositDesc": null,
          "depositEnable": true,
          "minConfirm": 0,
          "name": "EOS",
          "network": "EOS",
          "withdrawEnable": false,
          "withdrawFee": "0.000100000000000000",
          "withdrawIntegerMultiple": null,
          "withdrawMax": "10000.000000000000000000",
          "withdrawMin": "0.001000000000000000",
          "sameAddress": false,
          "contract": "TN3W4H6rK2ce4vX9YnFQHwKENnHjoxbm9",
          "withdrawTips": "Both a MEMO and an Address are required.",
          "depositTips": "Both a MEMO and an Address are required.",
          "netWork": "EOS"
      },
      {
          "coin": "BTC",
          "depositDesc": null,
          "depositEnable": true,
          "minConfirm": 0,
          "name": "BTC-BSC",
          "network": "BEP20(BSC)",
          "withdrawEnable": true,
          "withdrawFee": "0.000010000000000000",
          "withdrawIntegerMultiple": null,
          "withdrawMax": "100.000000000000000000",
          "withdrawMin": "0.000100000000000000",
          "sameAddress": false,
          "contract": "0x7130d2a12b9bcbfae4f2634d864a1ee1ce3ead9c",
          "withdrawTips": null,
          "depositTips": null,
          "netWork": "BTC"
      }
    ]
  },
]
```



**HTTP请求**

- **GET** `/api/v3/capital/config/getall`

**接口权限要求:** 钱包提现相关读 / SPOT_WITHDRAW_R

**权重(IP):** 10

**请求参数**

| 参数名    | 数据类型 | 是否必须 | 说明   |
| :-------- | :------- | :------- | :----- |
| timestamp | string   | 是       | 时间戳 |
| signature | string   | 是       | 签名   |

**返回参数**

| 参数名         | 说明                                                         |
| :------------- | :----------------------------------------------------------- |
| depositEnable  | 是否可充值                                                   |
| withdrawEnable | 是否可提币                                                   |
| withdrawFee    | 提币手续费                                                   |
| withdrawMax    | 最大提币限额                                                 |
| withdrawMin    | 最小提币限额                                                 |
| contract       | 币种智能合约地址                                             |
| network        | 币种所支持的网络（旧参数，即将下线，建议提币使用提币新接口） |
| netWork        | 币种所支持的网络（新参数，适用于提币新接口）                 |



###### 提币（新增）

> 请求示例

```text
post /api/v3/capital/withdraw?coin=EOS&address=zzqqqqqqqqqq&amount=10&netWork=EOS&memo=MX10086&timestamp={{timestamp}}&signature={{signature}}
```



> 返回示例

```json
{
    "id":"7213fea8e94b4a5593d507237e5a555b"
}
```



**HTTP请求**

- **POST** `/api/v3/capital/withdraw`

**接口权限要求:** 钱包提现相关写 / SPOT_WITHDRAW_W

**权重(IP):** 1

**请求参数**

| 参数名          | 数据类型 | 是否必须 | 说明                         |
| :-------------- | :------- | :------- | :--------------------------- |
| coin            | string   | 是       | 币种                         |
| withdrawOrderId | string   | 否       | 自定义提币ID                 |
| netWork         | string   | 否       | 提币网络                     |
| contractAddress | string   | 否       | 币种智能合约地址             |
| address         | string   | 是       | 提币地址                     |
| memo            | string   | 否       | 如地址中需求memo，则此处必传 |
| amount          | string   | 是       | 数量                         |
| remark          | string   | 否       | 备注                         |
| timestamp       | string   | 是       | 时间戳                       |
| signature       | string   | 是       | 签名                         |

可以在接口 `Get /api/v3/capital/config/getall`的返回值中某币种的`networkList`获取`netWork`网络字段。

**返回参数**

| 参数名 | 说明   |
| :----- | :----- |
| id     | 提币ID |

###### 取消提币

> 请求示例

```text
delete /api/v3/capital/withdraw?id=ca7bd51895134fb5bd749f1cf875b8af&timestamp={{timestamp}}&signature={{signature}}
```



> 返回示例

```json
{
    "id": "ca7bd51895134fb5bd749f1cf875b8af"
}
```



**HTTP请求**

- **DELETE** `/api/v3/capital/withdraw`

**接口权限要求:** 钱包提现相关写 / SPOT_WITHDRAW_W

**权重(IP):** 1

**请求参数**

| 参数名 | 数据类型 | 是否必须 | 说明   |
| :----- | :------- | :------- | :----- |
| id     | string   | 是       | 提币ID |

**返回参数**

| 参数名 | 说明   |
| :----- | :----- |
| id     | 提币ID |



###### 获取充值历史(支持多网络)

> 请求示例

```text
get /api/v3/capital/deposit/hisrec?coin=EOS&timestamp={{timestamp}}&signature={{signature}}
```



> 返回示例

```json
[
  {
        "amount": "50000",
        "coin": "EOS",
        "network": "EOS",
        "status": 5,
        "address": "0x20b7cf77db93d6ef1ab979c49142ec168427fdee",
        "txId": "01391d1c1397ef0a3cbb3c7f99a90846f7c8c2a8dddcdcf84f46b530dede203e1bc804",
        "insertTime": 1659513342000,
        "unlockConfirm": "10",
        "confirmTimes": "241",
        "memo": "xxyy1122"
  }
]
```



**HTTP请求**

- **GET** `/api/v3/capital/deposit/hisrec`

**接口权限要求:** 钱包提现相关读 / SPOT_WITHDRAW_R

**权重(IP):** 1

**请求参数**

| 参数名    | 数据类型 | 是否必须 | 说明                    |
| :-------- | :------- | :------- | :---------------------- |
| coin      | string   | 否       | 币种                    |
| status    | string   | 否       | 状态                    |
| startTime | string   | 否       | 默认当前时间7天前的时间 |
| endTime   | string   | 否       | 默认当前时间戳，13位    |
| limit     | string   | 否       | 默认：1000，最大1000    |
| timestamp | string   | 是       | 时间戳                  |
| signature | string   | 是       | 签名                    |

1. 默认返回最近7天的记录.
2. `startTime` 与 `endTime` 的默认时间戳，保证请求时间间隔不超过7天.
3. 做多可查询90天内的记录. **返回参数**

| 参数名        | 说明                                                         |
| :------------ | :----------------------------------------------------------- |
| amount        | 数量                                                         |
| coin          | 币种                                                         |
| network       | 链类型                                                       |
| status        | 充值状态，1:不入账的小额充值，2:延遲到賬，3:大額充值，4:等待中，5:入账成功，6:审核中，7:驳回，8:强充值退回，9:预入账，10:无效充值，11:受限中，12 :已退回 |
| address       | 地址                                                         |
| addressTag    | 地址标签                                                     |
| txId          | 交易编号                                                     |
| insertTime    | 插入时间/创建时间                                            |
| unlockConfirm | 解锁需要的网络确认次数                                       |
| confirmTimes  | 已解锁次数                                                   |
| memo          | memo                                                         |



###### 获取充值地址 (支持多网络)

> 请求示例

```text
get /api/v3/capital/deposit/address?coin=USDT&timestamp={{timestamp}}&signature={{signature}}
```



> 返回示例

```json
[
  {
      "coin": "USDT",
      "network": "TRC20",
      "address": "TXobiKkdciupZrhdvZyTSSLjE8CmZAufS",
      "memo": null
  },
  {
      "coin": "USDT",
      "network": "BEP20(BSC)",
      "address": "0xebe4804f7ecc22d5011c42e6ea1f2e6c891d89b",
      "memo": null
  },
  {
      "coin": "USDT",
      "network": "ERC20",
      "address": "0x3f4d1f43761b52fd594e5a77cd83cab6955e85b",
      "memo": null
  }
]
```



**HTTP请求**

- **GET** `/api/v3/capital/deposit/address`

**接口权限要求:** 钱包提现相关读 / SPOT_WITHDRAW_R

**权重(IP):** 10

**请求参数**

| 参数名    | 数据类型 | 是否必须 | 说明   |
| :-------- | :------- | :------- | :----- |
| coin      | string   | 是       | 币种   |
| network   | string   | 否       |        |
| timestamp | string   | 是       | 时间戳 |
| signature | string   | 是       | 签名   |

**返回参数**

| 参数名  | 说明 |
| :------ | :--- |
| address | 地址 |
| coin    | 币种 |
| memo    | memo |
| network | 网络 |

###### 获取提币地址

> 请求示例

```text
get /api/v3/capital/withdraw/address?coin=USDT&timestamp={{timestamp}}&signature={{signature}}
```



> 返回示例

```json
{
    "data": [
        {
            "coin": "USDT",
            "network": "TRC20",
            "address": "TArGWdTApuuZtiWMjupXqbZqQYsBTy126o",
            "addressTag": "test",
            "memo": null
        },
        {
            "coin": "USDT",
            "network": "BEP20(BSC)",
            "address": "0xa82898C70BeB5E1b1621fdA62fD17Ba27227BBC5",
            "addressTag": "usdt",
            "memo": null
        }
    ],
    "totalRecords": 2,
    "page": 1,
    "totalPageNum": 1
}
```



**HTTP请求**

- **GET** `/api/v3/capital/withdraw/address`

**接口权限要求:** 钱包提现相关读 / SPOT_WITHDRAW_R

**权重(IP):** 10

**请求参数**

| 参数名    | 数据类型 | 是否必须 | 说明        |
| :-------- | :------- | :------- | :---------- |
| coin      | string   | 否       | 币种        |
| page      | number   | 否       | 页数，默认1 |
| limit     | number   | 否       | 条数        |
| timestamp | string   | 是       | 时间戳      |
| signature | string   | 是       | 签名        |

**返回参数**

| 参数名       | 说明     |
| :----------- | :------- |
| coin         | 币种     |
| network      | 链名称   |
| address      | 地址     |
| addressTag   | 地址标签 |
| memo         | memo     |
| totalRecords | 总条数   |
| totalPageNum | 总页数   |
| page         | 当前页   |



#### 4.创建gate SDK调用方法，接口文档如下

##### (1).Apiv4鉴权及规则描述

描述：

1. 在官网个人中心申请 APIv4 Key ，并确保该 Key 拥有对应操作的读写权限。
2. 在发送请求头部传入 `KEY` ，即 APIv4 密钥对的 Key
3. 在发送请求头部传入 `Timestamp` ，即请求发送的时间，Format是秒级精度的 Unix 时间戳。 同时该时间不能与当前时间差距超过 60 秒。
4. 在发送请求头部传入 `SIGN` ，即将请求生成签名String并用 APIv4 Secret 加密后生成的签名。 签名String生成方法参看下节，加密算法为 `HexEncode(HMAC_SHA512(secret, signature_string))` ， 即通过 HMAC-SHA512 加密算法，将 APIv4 Secret 作为加密密钥，签名String作为加密消息， 生成加密结果的 16 进制输出。
5. 确保发送请求的客户端 IP 地址在所使用的密钥的 IP 地址白名单里。



Apiv4签名String生成方式：

```
Request Method + "\n" + Request URL + "\n" + Query String + "\n" + HexEncode(SHA512(Request Payload)) + "\n" + Timestamp
```



Request Method

请求方法，全大写，如：POST,GET



Request URL

请求URL，不包括服务地址和端口，如：`/api/v4/futures/orders`



Query String

*没有*使用 URL 编码的Request Parameters，Request Parameters在参与计算签名时的顺序一定要保证和实际请求里的顺序一致。 如 `status=finished&limit=50` 。

如果没有Request Parameters，使用空String ("")



HexEncode(SHA512(Request Payload))

将请求体String使用 SHA512 哈希之后的结果。如果没有请求体，使用空String的哈希结果，即 `cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e`



Timestamp

设置在请求头部`Timestamp`里的值



##### (2).查询币种支持的链

描述

*查询币种支持的链*



HTTP 请求

```
GET /wallet/currency_chains
```



### 参数

| 名称     | 位置               | Type   | 必选 | 描述     |
| -------- | ------------------ | ------ | ---- | -------- |
| currency | Request Parameters | string | 是   | 币种名称 |



返回

| Status Code | 含义 | 描述     | Format   |
| ----------- | ---- | -------- | -------- |
| 200         | OK   | 查询成功 | [Inline] |



返回Format

Status Code **200**

| 名称                   | Type           | 描述                                     |
| ---------------------- | -------------- | ---------------------------------------- |
| » chain                | string         | 链名称                                   |
| » name_cn              | string         | 链的中文名称                             |
| » name_en              | string         | 链的英文名称                             |
| » contract_address     | string         | 币种智能合约地址，如果没有地址则为空字串 |
| » is_disabled          | integer(int32) | 是否禁用，0 表示未禁用                   |
| » is_deposit_disabled  | integer(int32) | 充值是否禁用，0 表示未禁用               |
| » is_withdraw_disabled | integer(int32) | 提现是否禁用，0 表示未禁用               |
| » decimal              | string         | 提币精度                                 |

该请求不需要认证



请求示例

```
# coding: utf-8
import requests

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/wallet/currency_chains'
query_param = 'currency=GT'
r = requests.request('GET', host + prefix + url + "?" + query_param, headers=headers)
print(r.json())

```

返回示例

```
[
  {
    "chain": "ETH",
    "name_cn": "以太坊ERC20",
    "name_en": "ETH/ERC20",
    "contract_address": "",
    "is_disabled": 0,
    "is_deposit_disabled": 0,
    "is_withdraw_disabled": 0
  }
]
```



##### (3).获取币种充值地址

描述

获取币种充值地址



HTTP请求

```
GET /wallet/deposit_address
```



参数

| 名称     | 位置               | Type   | 必选 | 描述     |
| -------- | ------------------ | ------ | ---- | -------- |
| currency | Request Parameters | string | 是   | 币种名称 |



返回

| Status Code | 含义 | 描述         | Format |
| ----------- | ---- | ------------ | ------ |
| 200         | OK   | 地址获取成功 | Inline |



返回Format

Status Code **200**

| 名称                     | Type    | 描述                                                       |
| ------------------------ | ------- | ---------------------------------------------------------- |
| » currency               | string  | 币种信息                                                   |
| » address                | string  | 充值地址                                                   |
| » multichain_addresses   | array   |                                                            |
| »» MultiChainAddressItem | object  |                                                            |
| »»» chain                | string  | 链的名称                                                   |
| »»» address              | string  | 充值地址                                                   |
| »»» payment_id           | string  | 部分币种充值时必须填写的Note                               |
| »»» payment_name         | string  | NoteType, `Tag` 或 `Memo`                                  |
| »»» obtain_failed        | integer | 地址是否获取成功，0 表示成功，1 表示失败，可能需要重新获取 |

该请求需要 API key 和 secret 认证



请求示例
```
# coding: utf-8
import requests
import time
import hashlib
import hmac

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/wallet/deposit_address'
query_param = 'currency=USDT'
# `gen_sign` 的实现参考认证一章
sign_headers = gen_sign('GET', prefix + url, query_param)
headers.update(sign_headers)
r = requests.request('GET', host + prefix + url + "?" + query_param, headers=headers)
print(r.json())
```

返回示例

```
{
  "currency": "USDT",
  "address": "LPXtk1kWHioP62SzfqwKbYE3Z7Wt2ujYEc",
  "multichain_addresses": [
    {
      "chain": "TRX",
      "address": "LPXtk1kWHioP62SzfqwKbYE3Z7Wt2ujYEc",
      "payment_id": "",
      "payment_name": "",
      "obtain_failed": 0
    }
  ]
}
```



##### (4).获取提现记录

描述：获取提现记录,记录查询时间范围不允许超过 30 天



HTTP请求

```
GET /wallet/withdrawals
```



### 参数

| 名称              | 位置               | Type           | 必选 | 描述                                                         |
| ----------------- | ------------------ | -------------- | ---- | ------------------------------------------------------------ |
| currency          | Request Parameters | string         | 否   | 指定查询币种，不指定返回全部币种                             |
| withdraw_id       | Request Parameters | string         | 否   | 提现记录id， 以w开头，如： w1879219868。 当withdraw_id 不为空时，则值查询这一条提现记录，不再按照时间进行查询 |
| asset_class       | Request Parameters | string         | 否   | 提现记录币种Type，默认为空。即支持用户按需查询主区和创新区的提现记录。 Value range: SPOT、PILOT SPOT ： 主区 PILOT： 创新区 |
| withdraw_order_id | Request Parameters | string         | 否   | 提现时用户自定义的单号。 默认为空。 非空时 会查询指定用户自定义单号记录 |
| from              | Request Parameters | integer(int64) | 否   | 查询记录的起始时间，不指定则默认从当前时间开始向前推 7 天    |
| to                | Request Parameters | integer(int64) | 否   | 查询记录的结束时间，不指定则默认为当前时间                   |
| limit             | Request Parameters | integer        | 否   | 列表返回的最大数量                                           |
| offset            | Request Parameters | integer        | 否   | 列表返回的偏移量，从 0 开始                                  |



返回

| Status Code | 含义 | 描述         | Format   |
| ----------- | ---- | ------------ | -------- |
| 200         | OK   | 列表查询成功 | [Inline] |



返回Format

Status Code **200**

| 名称                | Type   | 描述                                                         |
| ------------------- | ------ | ------------------------------------------------------------ |
| » id                | string | 交易记录 ID                                                  |
| » txid              | string | 区块转账哈希记录                                             |
| » block_number      | string | 区块编号                                                     |
| » withdraw_order_id | string | 用户端订单编号,最长32个，输入内容只能包含数字、字母、下划线(_)、中划线(-) 或者点(.) |
| » timestamp         | string | 操作时间                                                     |
| » amount            | string | 币的数量                                                     |
| » fee               | string | 手续费                                                       |
| » currency          | string | 币种名称                                                     |
| » address           | string | 提现地址                                                     |
| » fail_reason       | string | 提现失败原因，当 status = CANCEL时有值，其余状态时为空       |
| » timestamp2        | string | 提现终态时间，即： 提现取消时间或提现成功时间 当 status = CANCEL 时，对应 取消时间 当 status = DONE 且block_number > 0 时，为提现成功时间 |
| » memo              | string | 转账memo等Note信息                                           |
| » status            | string | 交易状态  - DONE: 完成 (block_number > 0 才算真的上链完成) - CANCEL: 已取消 - REQUEST: 请求中 - MANUAL: 待人工审核 - BCODE: 充值码操作 - EXTPEND: 已经发送等待确认 - FAIL: 链上失败等待确认 - INVALID: 无效订单 - VERIFY: 验证中 - PROCES: 处理中 - PEND: 处理中 - DMOVE: 待人工审核 - REVIEW: 审核中 |
| » chain             | string | 提现的链名称                                                 |

该请求需要 API key 和 secret 认证



请求示例

```
# coding: utf-8
import requests
import time
import hashlib
import hmac

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/wallet/withdrawals'
query_param = ''
# `gen_sign` 的实现参考认证一章
sign_headers = gen_sign('GET', prefix + url, query_param)
headers.update(sign_headers)
r = requests.request('GET', host + prefix + url, headers=headers)
print(r.json())

```

返回示例

```
[
  [
    {
      "id": "w1879219868",
      "currency": "USDT",
      "address": "THISISTESTADDRESSFORGATEPAY",
      "amount": "4.023",
      "fee": "0",
      "txid": "Internal transaction 260594131",
      "chain": "BSC",
      "timestamp": "1745220149",
      "status": "DONE",
      "withdraw_order_id": "202504211521368538928",
      "block_number": "1000",
      "fail_reason": "",
      "type": "appbankgp",
      "timestamp2": "1745220149",
      "memo": ""
    }
  ]
]
```

##### (5).获取充值记录

描述：记录查询时间范围不允许超过 30 天



HTTP请求

```
GET /wallet/deposits
```



参数

| 名称     | 位置               | Type           | 必选 | 描述                                                      |
| -------- | ------------------ | -------------- | ---- | --------------------------------------------------------- |
| currency | Request Parameters | string         | 否   | 指定查询币种，不指定返回全部币种                          |
| from     | Request Parameters | integer(int64) | 否   | 查询记录的起始时间，不指定则默认从当前时间开始向前推 7 天 |
| to       | Request Parameters | integer(int64) | 否   | 查询记录的结束时间，不指定则默认为当前时间                |
| limit    | Request Parameters | integer        | 否   | 列表返回的最大数量，上限 500 笔                           |
| offset   | Request Parameters | integer        | 否   | 列表返回的偏移量，从 0 开始                               |



返回

| Status Code | 含义                                                         | 描述         | Format   |
| ----------- | ------------------------------------------------------------ | ------------ | -------- |
| 200         | [OK(opens new window)](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 列表查询成功 | [Inline] |



返回Format

Status Code **200**

| 名称                | Type   | 描述                                                         |
| ------------------- | ------ | ------------------------------------------------------------ |
| » id                | string | 交易记录 ID                                                  |
| » txid              | string | 区块转账哈希记录                                             |
| » withdraw_order_id | string | 用户端订单编号,最长32个，输入内容只能包含数字、字母、下划线(_)、中划线(-) 或者点(.) |
| » timestamp         | string | 操作时间                                                     |
| » amount            | string | 币的数量                                                     |
| » currency          | string | 币种名称                                                     |
| » address           | string | 提现地址。提现操作Required                                   |
| » memo              | string | 转账memo等Note信息                                           |
| » status            | string | 交易状态  - REVIEW: 充值审核中(合规审查) - PEND: 处理中 - DONE: 等待资金解锁 - INVALID: 无效数据 - TRACK: 跟踪确认数，等待给用户添加资金(现货) - BLOCKED: 拒绝充值 - DEP_CREDITED: 充值到账，提现未解锁 |
| » chain             | string | 提现的链名称                                                 |

该请求需要 API key 和 secret 认证



请求示例

```
# coding: utf-8
import requests
import time
import hashlib
import hmac

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/wallet/deposits'
query_param = ''
# `gen_sign` 的实现参考认证一章
sign_headers = gen_sign('GET', prefix + url, query_param)
headers.update(sign_headers)
r = requests.request('GET', host + prefix + url, headers=headers)
print(r.json())

```

返回示例

```
[
  {
    "id": "210496",
    "timestamp": "1542000000",
    "withdraw_order_id": "order_123456",
    "currency": "USDT",
    "address": "1HkxtBAMrA3tP5ENnYY2CZortjZvFDH5Cs",
    "txid": "128988928203223323290",
    "amount": "222.61",
    "memo": "",
    "status": "DONE",
    "chain": "TRX"
  }
]
```



##### (6). 查询单个交易对详情

描述：查询单个交易对详情



HTTP请求

```
GET /spot/currency_pairs/{currency_pair}
```



参数

| 名称          | 位置 | Type   | 必选 | 描述   |
| ------------- | ---- | ------ | ---- | ------ |
| currency_pair | URL  | string | 是   | 交易对 |



返回

| Status Code | 含义 | 描述     | Format |
| ----------- | ---- | -------- | ------ |
| 200         | OK   | 成功查询 | Inline |



返回Format

Status Code **200**

*现货交易对*

| 名称               | Type           | 描述                                                         |
| ------------------ | -------------- | ------------------------------------------------------------ |
| » id               | string         | 交易对                                                       |
| » base             | string         | 交易货币                                                     |
| » base_name        | string         | 交易货币名称                                                 |
| » quote            | string         | 计价货币                                                     |
| » quote_name       | string         | 计价货币名称                                                 |
| » fee              | string         | 交易费率                                                     |
| » min_base_amount  | string         | 交易货币最低交易数量，null 表示无限制                        |
| » min_quote_amount | string         | 计价货币最低交易数量，null 表示无限制                        |
| » max_base_amount  | string         | 交易货币最大交易数量，null 表示无限制                        |
| » max_quote_amount | string         | 计价货币最大交易数量，null 表示无限制                        |
| » amount_precision | integer        | 数量精度                                                     |
| » precision        | integer        | 价格精度                                                     |
| » trade_status     | string         | 交易状态  - untradable: 不可交易 - buyable: 可买 - sellable: 可卖 - tradable: 买卖均可交易 |
| » sell_start       | integer(int64) | 允许卖出时间，秒级 Unix 时间戳                               |
| » buy_start        | integer(int64) | 允许买入时间，秒级 Unix 时间戳                               |
| » delisting_time   | integer(int64) | 预计下架时间，秒级 Unix 时间戳                               |
| » type             | string         | 交易对Type，normal:常规, premarket:盘前                      |
| » trade_url        | string         | 交易链接                                                     |
| » st_tag           | boolean        | 币对是否在ST风险评估中，false - 否，true - 是                |



枚举值列表

| 属性         | 值         |
| ------------ | ---------- |
| trade_status | untradable |
| trade_status | buyable    |
| trade_status | sellable   |
| trade_status | tradable   |

该请求不需要验证



请求示例

```
# coding: utf-8
import requests

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/spot/currency_pairs/ETH_BTC'
query_param = ''
r = requests.request('GET', host + prefix + url, headers=headers)
print(r.json())

```

返回示例

```
{
  "id": "ETH_USDT",
  "base": "ETH",
  "base_name": "Ethereum",
  "quote": "USDT",
  "quote_name": "Tether",
  "fee": "0.2",
  "min_base_amount": "0.001",
  "min_quote_amount": "1.0",
  "max_base_amount": "10000",
  "max_quote_amount": "10000000",
  "amount_precision": 3,
  "precision": 6,
  "trade_status": "tradable",
  "sell_start": 1516378650,
  "buy_start": 1516378650,
  "delisting_time": 0,
  "trade_url": "https://www.gate.io/trade/ETH_USDT",
  "st_tag": false
}
```



##### (7).获取交易对 ticker 信息

描述：*获取交易对 ticker 信息*

如果指定 `currency_pair` 则只查询该交易对，否则返回全部信息



HTTP请求

```
GET /spot/tickers
```



参数

| 名称          | 位置               | Type   | 必选 | 描述   |
| ------------- | ------------------ | ------ | ---- | ------ |
| currency_pair | Request Parameters | string | 否   | 交易对 |
| timezone      | Request Parameters | string | 否   | 时区   |



枚举值列表

| 参数     | 值   |
| -------- | ---- |
| timezone | utc0 |
| timezone | utc8 |
| timezone | all  |



返回

| Status Code | 含义 | 描述     | Format   |
| ----------- | ---- | -------- | -------- |
| 200         | OK   | 成功查询 | [Inline] |



返回Format

Status Code **200**

| 名称                | Type                 | 描述                                                         |
| ------------------- | -------------------- | ------------------------------------------------------------ |
| » currency_pair     | string               | 交易对                                                       |
| » last              | string               | 最新成交价                                                   |
| » lowest_ask        | string               | 最新卖方最低价                                               |
| » lowest_size       | string               | 最新卖方最低价数量；批量查询时不存在；单个查询时存在,如果没有数据时为空 |
| » highest_bid       | string               | 最新买方最高价                                               |
| » highest_size      | string               | 最新买方最高价数量；批量查询时不存在；单个查询时存在,如果没有数据时为空 |
| » change_percentage | string               | 最近24h涨跌百分比，跌用负数标识，如 -7.45                    |
| » change_utc0       | string               | utc0时区，最近24h涨跌百分比，跌用负数标识，如 -7.45          |
| » change_utc8       | string               | utc8时区，最近24h涨跌百分比，跌用负数标识，如 -7.45          |
| » base_volume       | string               | 最近24h交易货币成交量                                        |
| » quote_volume      | string               | 最近24h计价货币成交量                                        |
| » high_24h          | string               | 24小时最高价                                                 |
| » low_24h           | string               | 24小时最低价                                                 |
| » etf_net_value     | string               | ETF 净值                                                     |
| » etf_pre_net_value | string\|null         | ETF 前一再平衡点净值                                         |
| » etf_pre_timestamp | integer(int64)\|null | ETF 前一再平衡时间                                           |
| » etf_leverage      | string\|null         | ETF 当前杠杆率                                               |

该请求不需要认证



> 请求示例

```python
# coding: utf-8
import requests

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/spot/tickers'
query_param = ''
r = requests.request('GET', host + prefix + url, headers=headers)
print(r.json())
```

> 返回示例

```json
[
  {
    "currency_pair": "BTC3L_USDT",
    "last": "2.46140352",
    "lowest_ask": "2.477",
    "highest_bid": "2.4606821",
    "change_percentage": "-8.91",
    "change_utc0": "-8.91",
    "change_utc8": "-8.91",
    "base_volume": "656614.0845820589",
    "quote_volume": "1602221.66468375534639404191",
    "high_24h": "2.7431",
    "low_24h": "1.9863",
    "etf_net_value": "2.46316141",
    "etf_pre_net_value": "2.43201848",
    "etf_pre_timestamp": 1611244800,
    "etf_leverage": "2.2803019447281203"
  }
]
```

## 



##### (8).下单

描述：支持现货、保证金、杠杆、全仓杠杆下单。通过 `account` field来使用不同的账户，默认为 `spot` ，即使用现货账户下单，如果用户是 `unified` 账户，默认是用统一账户下单 使用杠杆账户交易，即 `account` 设置为 `margin` 的时候，可以设置 `auto_borrow` 为 `true`， 在账户余额不足的情况，由系统自动执行 `POST /margin/uni/loans` 借入不足部分。 杠杆下单成交之后的获取到的资产是否自动用于归还逐仓杠杆账户的借入单，取决于用户逐仓杠杆**账户**的自动还款设置， 该账户自动还款设置可以通过 `/margin/auto_repay` 来查询和设置。 使用统一账户交易，即 `account` 设置为 `unified` 的时候，同样可以启用 `auto_borrow` 来实现自动借入不足部分，但是与逐仓杠杆账户不同的是，统一账户的委托是否自动还款取决于下单时的 `auto_repay` 设置，该设置只对当前委托生效，即只有该委托成交之后获取到的资产会用来还款全仓杠杆账户的借入单。 统一账户下单目前支持同时开启 `auto_borrow` 和 `auto_repay`。 自动还款会在订单结束时触发，即 `status` 为 `cancelled` 或者 `closed` 。 **委托状态** 挂单中的委托状态是 `open` ，在数量全部成交之前保持为 `open` 。如果被全部吃掉，则订单结束，状态变成 `closed` 。 假如全部成交之前，订单被撤销，不管是否有部分成交，状态都会变为 `cancelled` **冰山委托** `iceberg` 用来设置冰山委托显示的数量，不支持完全隐藏。注意隐藏部分成交时按照taker 的手续费率收取。 **限制用户自成交** 设置 `stp_act` 来决定使用限制用户自成交的策略



HTTP请求

```
POST /spot/orders
```



参数

| 名称            | 位置     | Type    | 必选 | 描述                                                         |
| --------------- | -------- | ------- | ---- | ------------------------------------------------------------ |
| x-gate-exptime  | 请求头部 | string  | 否   | 指定过期时间(毫秒); 如果 Gate 收到请求的时间大于过期时间, 请求将被拒绝 |
| body            | body     | object  | 是   |                                                              |
| » text          | body     | string  | 否   | 订单自定义信息，用户可以用该字段设置自定义 ID，用户自定义 field必须满足以下条件： |
| » currency_pair | body     | string  | 是   | 交易货币对                                                   |
| » type          | body     | string  | 否   | 订单Type                                                     |
| » account       | body     | string  | 否   | 账户Type，spot - 现货账户，margin - 杠杆账户，unified - 统一账户 |
| » side          | body     | string  | 是   | 买单或者卖单                                                 |
| » amount        | body     | string  | 是   | 交易数量                                                     |
| » price         | body     | string  | 否   | 交易价,`type`=`limit`时Required                              |
| » time_in_force | body     | string  | 否   | Time in force 策略。                                         |
| » iceberg       | body     | string  | 否   | 冰山下单显示的数量，不指定或传 0 都默认为普通下单。目前不支持全部冰山。 |
| » auto_borrow   | body     | boolean | 否   | 杠杆(包括逐仓全仓)交易时，如果账户余额不足，是否由系统自动借入不足部分 |
| » auto_repay    | body     | boolean | 否   | 全仓杠杆下单是否开启自动还款，默认关闭。需要注意的是:        |
| » stp_act       | body     | string  | 否   | Self-Trading Prevention Action,用户可以用该 field设置自定义限制自成交策略。 |
| » fee_discount  | body     | string  | 否   | 费率折扣                                                     |
| » action_mode   | body     | string  | 否   | 处理模式:                                                    |



详细描述

**» text**: 订单自定义信息，用户可以用该字段设置自定义 ID，用户自定义 field必须满足以下条件：

1. 必须以 `t-` 开头
2. 不计算 `t-` ，长度不能超过 28 字节
3. 输入内容只能包含数字、字母、下划线(_)、中划线(-) 或者点(.)

除用户自定义信息以外，以下为内部保留 field，标识订单来源: 101 代表 `android` 下单 102 代表 `IOS` 下单 103 代表 `IPAD` 下单 104 代表 `webapp` 下单 3 代表 `web` 下单 2 代表 `apiv2` 下单 apiv4 代表 `apiv4` 下单

**» type**: 订单Type

- limit : 限价单
- market : 市价单

**» amount**: 交易数量
`type`为`limit`时，指交易货币，即需要交易的货币，如`BTC_USDT`中指`BTC`。
`type`为`market`时，根据买卖不同指代不同

- `side` : `buy` 指代计价货币，`BTC_USDT`中指`USDT`
- `side` : `sell` 指代交易货币，`BTC_USDT`中指`BTC`

**» time_in_force**: Time in force 策略。

- gtc: GoodTillCancelled
- ioc: ImmediateOrCancelled，立即成交或者取消，只吃单不挂单
- poc: PendingOrCancelled，被动委托，只挂单不吃单
- fok: FillOrKill，全部成交或者全部取消

```
type`=`market`时仅支持`ioc`和`fok
```

**» auto_repay**: 全仓杠杆下单是否开启自动还款，默认关闭。需要注意的是:

1. 此 field仅针对全仓杠杆有效。逐仓杠杆不支持订单级别的自动还款设置，只能通过 `POST /margin/auto_repay` 修改用户级别的设置
2. `auto_borrow` 与 `auto_repay` 支持同时开启

**» stp_act**: Self-Trading Prevention Action,用户可以用该 field设置自定义限制自成交策略。

1. 用户在设置加入`STP用户组`后，可以通过传递 `stp_act` 来限制用户发生自成交的策略，没有传递 `stp_act` 默认按照 `cn` 的策略。
2. 用户在没有设置加入`STP用户组`时，传递 `stp_act` 参数会报错。
3. 用户没有使用 `stp_act` 发生成交的订单，`stp_act` 返回 `-`。

- cn: Cancel newest,取消新订单，保留老订单
- co: Cancel oldest,取消⽼订单，保留新订单
- cb: Cancel both,新旧订单都取消

**» action_mode**: 处理模式: 下单时根据action_mode返回不同的字段, 该字段只在请求时有效，响应结果中不包含该 field `ACK`: 异步模式，只返回订单关键 field `RESULT`: 无清算信息 `FULL`: 完整模式(默认)



枚举值列表

| 参数            | 值     |
| --------------- | ------ |
| » type          | limit  |
| » type          | market |
| » side          | buy    |
| » side          | sell   |
| » time_in_force | gtc    |
| » time_in_force | ioc    |
| » time_in_force | poc    |
| » time_in_force | fok    |
| » stp_act       | cn     |
| » stp_act       | co     |
| » stp_act       | cb     |
| » stp_act       | -      |



返回

| Status Code | 含义                                                         | 描述                                                         | Format |
| ----------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------ |
| 201         | [Created(opens new window)](https://tools.ietf.org/html/rfc7231#section-6.3.2) | 交易成功执行。具体执行结果根据下单时的 Time in force 策略来决定 | Inline |



返回Format

Status Code **201**

*现货单详情*

| 名称                   | Type           | 描述                                                         |
| ---------------------- | -------------- | ------------------------------------------------------------ |
| » id                   | string         | 订单 ID                                                      |
| » text                 | string         | 订单自定义信息，用户可以用该字段设置自定义 ID，用户自定义字段必须满足以下条件：  1. 必须以 `t-` 开头 2. 不计算 `t-` ，长度不能超过 28 字节 3. 输入内容只能包含数字、字母、下划线(_)、中划线(-) 或者点(.)  除用户自定义信息以外，以下为内部保留 field，标识订单来源: 101 代表 `android` 下单 102 代表 `IOS` 下单 103 代表 `IPAD` 下单 104 代表 `webapp` 下单 3 代表 `web` 下单 2 代表 `apiv2` 下单 apiv4 代表 `apiv4` 下单 |
| » amend_text           | string         | 用户修改订单时Note的信息                                     |
| » create_time          | string         | 订单创建时间                                                 |
| » update_time          | string         | 订单最新修改时间                                             |
| » create_time_ms       | integer(int64) | 订单创建时间，毫秒精度                                       |
| » update_time_ms       | integer(int64) | 订单最近修改时间，毫秒精度                                   |
| » status               | string         | 订单状态。  - `open`: 等待处理 - `closed`: 全部成交 - `cancelled`: 订单撤销 |
| » currency_pair        | string         | 交易货币对                                                   |
| » type                 | string         | 订单Type  - limit : 限价单 - market : 市价单                 |
| » account              | string         | 账户Type，spot - 现货账户，margin - 杠杆账户，unified - 统一账户 |
| » side                 | string         | 买单或者卖单                                                 |
| » amount               | string         | 交易数量 `type`为`limit`时，指交易货币，即需要交易的货币，如`BTC_USDT`中指`BTC`。 `type`为`market`时，根据买卖不同指代不同 - `side` : `buy` 指代计价货币，`BTC_USDT`中指`USDT` - `side` : `sell` 指代交易货币，`BTC_USDT`中指`BTC` |
| » price                | string         | 交易价,`type`=`limit`时Required                              |
| » time_in_force        | string         | Time in force 策略。  - gtc: GoodTillCancelled - ioc: ImmediateOrCancelled，立即成交或者取消，只吃单不挂单 - poc: PendingOrCancelled，被动委托，只挂单不吃单 - fok: FillOrKill，全部成交或者全部取消  `type`=`market`时仅支持`ioc`和`fok` |
| » iceberg              | string         | 冰山下单显示的数量，不指定或传 0 都默认为普通下单。目前不支持全部冰山。 |
| » auto_borrow          | boolean        | 杠杆(包括逐仓全仓)交易时，如果账户余额不足，是否由系统自动借入不足部分 |
| » auto_repay           | boolean        | 全仓杠杆下单是否开启自动还款，默认关闭。需要注意的是:  1. 此 field仅针对全仓杠杆有效。逐仓杠杆不支持订单级别的自动还款设置，只能通过 `POST /margin/auto_repay` 修改用户级别的设置 2. `auto_borrow` 与 `auto_repay` 支持同时开启 |
| » left                 | string         | 交易货币未成交数量                                           |
| » filled_amount        | string         | 交易货币已成交数量                                           |
| » fill_price           | string         | 已成交的计价币种总额，该 field废弃，建议使用相同意义的 `filled_total` |
| » filled_total         | string         | 已成交总金额                                                 |
| » avg_deal_price       | string         | 平均成交价                                                   |
| » fee                  | string         | 成交扣除的手续费                                             |
| » fee_currency         | string         | 手续费计价单位                                               |
| » point_fee            | string         | 手续费抵扣使用的点卡数量                                     |
| » gt_fee               | string         | 手续费抵扣使用的 GT 数量                                     |
| » gt_maker_fee         | string         | 手续费maker抵扣使用的 GT 数量                                |
| » gt_taker_fee         | string         | 手续费taker抵扣使用的 GT 数量                                |
| » gt_discount          | boolean        | 是否开启GT抵扣                                               |
| » rebated_fee          | string         | 返还的手续费                                                 |
| » rebated_fee_currency | string         | 返还手续费计价单位                                           |
| » stp_id               | integer        | 订单所属的`STP用户组`id，同一个`STP用户组`内用户之间的订单不允许发生自成交。  1. 如果撮合时两个订单的 `stp_id` 非 `0` 且相等，则不成交，而是根据 `taker` 的 `stp_act` 执行相应策略。 2. 没有设置`STP用户组`成交的订单，`stp_id` 默认返回 `0`。 |
| » stp_act              | string         | Self-Trading Prevention Action,用户可以用该 field设置自定义限制自成交策略。  1. 用户在设置加入`STP用户组`后，可以通过传递 `stp_act` 来限制用户发生自成交的策略，没有传递 `stp_act` 默认按照 `cn` 的策略。 2. 用户在没有设置加入`STP用户组`时，传递 `stp_act` 参数会报错。 3. 用户没有使用 `stp_act` 发生成交的订单，`stp_act` 返回 `-`。  - cn: Cancel newest,取消新订单，保留老订单 - co: Cancel oldest,取消⽼订单，保留新订单 - cb: Cancel both,新旧订单都取消 |
| » finish_as            | string         | 订单结束方式，包括：  - open: 等待处理 - filled: 完全成交 - cancelled: 用户撤销 - liquidate_cancelled: 爆仓撤销 - small: 订单数量太小 - depth_not_enough: 深度不足导致撤单 - trader_not_enough: 对手方不足导致撤单 - ioc: 未立即成交，因为 tif 设置为 ioc - poc: 未满足挂单策略，因为 tif 设置为 poc - fok: 未立即完全成交，因为 tif 设置为 fok - stp: 订单发生自成交限制而被撤销 - unknown: 未知 |
| » fee_discount         | string         | 费率折扣                                                     |
| » action_mode          | string         | 处理模式: 下单时根据action_mode返回不同的字段, 该字段只在请求时有效，响应结果中不包含该字段 `ACK`: 异步模式，只返回订单关键 field `RESULT`: 无清算信息 `FULL`: 完整模式(默认) |



枚举值列表

| 属性          | 值                  |
| ------------- | ------------------- |
| status        | open                |
| status        | closed              |
| status        | cancelled           |
| type          | limit               |
| type          | market              |
| side          | buy                 |
| side          | sell                |
| time_in_force | gtc                 |
| time_in_force | ioc                 |
| time_in_force | poc                 |
| time_in_force | fok                 |
| stp_act       | cn                  |
| stp_act       | co                  |
| stp_act       | cb                  |
| stp_act       | -                   |
| finish_as     | open                |
| finish_as     | filled              |
| finish_as     | cancelled           |
| finish_as     | liquidate_cancelled |
| finish_as     | depth_not_enough    |
| finish_as     | trader_not_enough   |
| finish_as     | small               |
| finish_as     | ioc                 |
| finish_as     | poc                 |
| finish_as     | fok                 |
| finish_as     | stp                 |
| finish_as     | unknown             |

该请求需要 API key 和 secret 认证



请求示例

```
# coding: utf-8
import requests
import time
import hashlib
import hmac

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/spot/orders'
query_param = ''
body='{"text":"t-abc123","currency_pair":"BTC_USDT","type":"limit","account":"unified","side":"buy","amount":"0.001","price":"65000","time_in_force":"gtc","iceberg":"0"}'
# `gen_sign` 的实现参考认证一章
sign_headers = gen_sign('POST', prefix + url, query_param, body)
headers.update(sign_headers)
r = requests.request('POST', host + prefix + url, headers=headers, data=body)
print(r.json())
```



请求体

```
{
  "text": "t-abc123",
  "currency_pair": "BTC_USDT",
  "type": "limit",
  "account": "unified",
  "side": "buy",
  "amount": "0.001",
  "price": "65000",
  "time_in_force": "gtc",
  "iceberg": "0"
}
```



返回示例-ACK response body example

```
{
  "id": "12332324",
  "text": "t-123456",
  "amend_text": "test2"
}
```



返回示例-RESULT response body example

```
{
  "id": "12332324",
  "text": "t-123456",
  "create_time": "1548000000",
  "update_time": "1548000100",
  "create_time_ms": 1548000000123,
  "update_time_ms": 1548000100123,
  "currency_pair": "ETH_BTC",
  "status": "cancelled",
  "type": "limit",
  "account": "spot",
  "side": "buy",
  "iceberg": "0",
  "amount": "1",
  "price": "5.00032",
  "time_in_force": "gtc",
  "auto_borrow": false,
  "left": "0.5",
  "filled_total": "2.50016",
  "avg_deal_price": "5.00032",
  "stp_act": "cn",
  "finish_as": "stp",
  "stp_id": 10240
}
```

返回示例

```
{
  "id": "1852454420",
  "text": "t-abc123",
  "amend_text": "-",
  "create_time": "1710488334",
  "update_time": "1710488334",
  "create_time_ms": 1710488334073,
  "update_time_ms": 1710488334074,
  "status": "closed",
  "currency_pair": "BTC_USDT",
  "type": "limit",
  "account": "unified",
  "side": "buy",
  "amount": "0.001",
  "price": "65000",
  "time_in_force": "gtc",
  "iceberg": "0",
  "left": "0",
  "filled_amount": "0.001",
  "fill_price": "63.4693",
  "filled_total": "63.4693",
  "avg_deal_price": "63469.3",
  "fee": "0.00000022",
  "fee_currency": "BTC",
  "point_fee": "0",
  "gt_fee": "0",
  "gt_maker_fee": "0",
  "gt_taker_fee": "0",
  "gt_discount": false,
  "rebated_fee": "0",
  "rebated_fee_currency": "USDT",
  "finish_as": "filled"
}
```





##### (9).查询订单列表

描述：*查询订单列表*

注意查询结果默认是现货，统一账户和逐仓杠杆账户的现货订单列表。 `status` 设置为 `open` ，即查询挂单列表时，只支持 `page` 和 `limit` 的分页控制。 `limit` 最大只允许设置到 100 。 不支持 `side` 和按时间范围查询的 `from`, `to` 参数。 `status` 设置为 `finished` ，即查询历史委托的时候， 除分页查询以外，还支持 `from` 和 `to` 按时间范围的查询。 此外还支持设置 `side` 参数筛选单边历史。 时间范围筛选的参数均是按订单**结束**时间来处理。



HTTP请求
GET /spot/orders



参数

| 名称          | 位置               | Type           | 必选 | 描述                                                         |
| ------------- | ------------------ | -------------- | ---- | ------------------------------------------------------------ |
| currency_pair | Request Parameters | string         | 是   | 指定交易对查询。如果查询挂单的记录，该 field必选。如果查询已成交的记录，该 field可以不指定。 |
| status        | Request Parameters | string         | 是   | 基于状态查询订单列表 `open` - 挂单中 `finished` - 已结束     |
| page          | Request Parameters | integer(int32) | 否   | 列表页数                                                     |
| limit         | Request Parameters | integer        | 否   | 列表返回的最大数量，如果 status 设置为 `open` ，`limit` 最大允许 100 |
| account       | Request Parameters | string         | 否   | 指定查询账户。                                               |
| from          | Request Parameters | integer(int64) | 否   | 查询记录的起始时间                                           |
| to            | Request Parameters | integer(int64) | 否   | 查询记录的结束时间，不指定则默认为当前时间                   |
| side          | Request Parameters | string         | 否   | 指定全部买单或全部卖单，不指定则两者都包括                   |



返回

| Status Code | 含义 | 描述         | Format   |
| ----------- | ---- | ------------ | -------- |
| 200         | OK   | 列表查询成功 | [Inline] |



返回Format

Status Code **200**

| 名称                    | Type           | 描述                                                         |
| ----------------------- | -------------- | ------------------------------------------------------------ |
| *None*                  | array          | [现货单详情]                                                 |
| » *None*                | object         | 现货单详情                                                   |
| »» id                   | string         | 订单 ID                                                      |
| »» text                 | string         | 订单自定义信息，用户可以用该字段设置自定义 ID，用户自定义字段必须满足以下条件：  1. 必须以 `t-` 开头 2. 不计算 `t-` ，长度不能超过 28 字节 3. 输入内容只能包含数字、字母、下划线(_)、中划线(-) 或者点(.)  除用户自定义信息以外，以下为内部保留 field，标识订单来源: 101 代表 `android` 下单 102 代表 `IOS` 下单 103 代表 `IPAD` 下单 104 代表 `webapp` 下单 3 代表 `web` 下单 2 代表 `apiv2` 下单 apiv4 代表 `apiv4` 下单 |
| »» amend_text           | string         | 用户修改订单时Note的信息                                     |
| »» create_time          | string         | 订单创建时间                                                 |
| »» update_time          | string         | 订单最新修改时间                                             |
| »» create_time_ms       | integer(int64) | 订单创建时间，毫秒精度                                       |
| »» update_time_ms       | integer(int64) | 订单最近修改时间，毫秒精度                                   |
| »» status               | string         | 订单状态。  - `open`: 等待处理 - `closed`: 全部成交 - `cancelled`: 订单撤销 |
| »» currency_pair        | string         | 交易货币对                                                   |
| »» type                 | string         | 订单Type  - limit : 限价单 - market : 市价单                 |
| »» account              | string         | 账户Type，spot - 现货账户，margin - 杠杆账户，unified - 统一账户 |
| »» side                 | string         | 买单或者卖单                                                 |
| »» amount               | string         | 交易数量 `type`为`limit`时，指交易货币，即需要交易的货币，如`BTC_USDT`中指`BTC`。 `type`为`market`时，根据买卖不同指代不同 - `side` : `buy` 指代计价货币，`BTC_USDT`中指`USDT` - `side` : `sell` 指代交易货币，`BTC_USDT`中指`BTC` |
| »» price                | string         | 交易价,`type`=`limit`时Required                              |
| »» time_in_force        | string         | Time in force 策略。  - gtc: GoodTillCancelled - ioc: ImmediateOrCancelled，立即成交或者取消，只吃单不挂单 - poc: PendingOrCancelled，被动委托，只挂单不吃单 - fok: FillOrKill，全部成交或者全部取消  `type`=`market`时仅支持`ioc`和`fok` |
| »» iceberg              | string         | 冰山下单显示的数量，不指定或传 0 都默认为普通下单。目前不支持全部冰山。 |
| »» auto_repay           | boolean        | 全仓杠杆下单是否开启自动还款，默认关闭。需要注意的是:  1. 此 field仅针对全仓杠杆有效。逐仓杠杆不支持订单级别的自动还款设置，只能通过 `POST /margin/auto_repay` 修改用户级别的设置 2. `auto_borrow` 与 `auto_repay` 支持同时开启 |
| »» left                 | string         | 交易货币未成交数量                                           |
| »» filled_amount        | string         | 交易货币已成交数量                                           |
| »» fill_price           | string         | 已成交的计价币种总额，该 field废弃，建议使用相同意义的 `filled_total` |
| »» filled_total         | string         | 已成交总金额                                                 |
| »» avg_deal_price       | string         | 平均成交价                                                   |
| »» fee                  | string         | 成交扣除的手续费                                             |
| »» fee_currency         | string         | 手续费计价单位                                               |
| »» point_fee            | string         | 手续费抵扣使用的点卡数量                                     |
| »» gt_fee               | string         | 手续费抵扣使用的 GT 数量                                     |
| »» gt_maker_fee         | string         | 手续费maker抵扣使用的 GT 数量                                |
| »» gt_taker_fee         | string         | 手续费taker抵扣使用的 GT 数量                                |
| »» gt_discount          | boolean        | 是否开启GT抵扣                                               |
| »» rebated_fee          | string         | 返还的手续费                                                 |
| »» rebated_fee_currency | string         | 返还手续费计价单位                                           |
| »» stp_id               | integer        | 订单所属的`STP用户组`id，同一个`STP用户组`内用户之间的订单不允许发生自成交。  1. 如果撮合时两个订单的 `stp_id` 非 `0` 且相等，则不成交，而是根据 `taker` 的 `stp_act` 执行相应策略。 2. 没有设置`STP用户组`成交的订单，`stp_id` 默认返回 `0`。 |
| »» stp_act              | string         | Self-Trading Prevention Action,用户可以用该 field设置自定义限制自成交策略。  1. 用户在设置加入`STP用户组`后，可以通过传递 `stp_act` 来限制用户发生自成交的策略，没有传递 `stp_act` 默认按照 `cn` 的策略。 2. 用户在没有设置加入`STP用户组`时，传递 `stp_act` 参数会报错。 3. 用户没有使用 `stp_act` 发生成交的订单，`stp_act` 返回 `-`。  - cn: Cancel newest,取消新订单，保留老订单 - co: Cancel oldest,取消⽼订单，保留新订单 - cb: Cancel both,新旧订单都取消 |
| »» finish_as            | string         | 订单结束方式，包括：  - open: 等待处理 - filled: 完全成交 - cancelled: 用户撤销 - liquidate_cancelled: 爆仓撤销 - small: 订单数量太小 - depth_not_enough: 深度不足导致撤单 - trader_not_enough: 对手方不足导致撤单 - ioc: 未立即成交，因为 tif 设置为 ioc - poc: 未满足挂单策略，因为 tif 设置为 poc - fok: 未立即完全成交，因为 tif 设置为 fok - stp: 订单发生自成交限制而被撤销 - unknown: 未知 |
| »» fee_discount         | string         | 费率折扣                                                     |



枚举值列表

| 属性          | 值                  |
| ------------- | ------------------- |
| status        | open                |
| status        | closed              |
| status        | cancelled           |
| type          | limit               |
| type          | market              |
| side          | buy                 |
| side          | sell                |
| time_in_force | gtc                 |
| time_in_force | ioc                 |
| time_in_force | poc                 |
| time_in_force | fok                 |
| stp_act       | cn                  |
| stp_act       | co                  |
| stp_act       | cb                  |
| stp_act       | -                   |
| finish_as     | open                |
| finish_as     | filled              |
| finish_as     | cancelled           |
| finish_as     | liquidate_cancelled |
| finish_as     | depth_not_enough    |
| finish_as     | trader_not_enough   |
| finish_as     | small               |
| finish_as     | ioc                 |
| finish_as     | poc                 |
| finish_as     | fok                 |
| finish_as     | stp                 |
| finish_as     | unknown             |

该请求需要 API key 和 secret 认证



请求示例

```
# coding: utf-8
import requests
import time
import hashlib
import hmac

host = "https://api.gateio.ws"
prefix = "/api/v4"
headers = {'Accept': 'application/json', 'Content-Type': 'application/json'}

url = '/spot/orders'
query_param = 'currency_pair=BTC_USDT&status=open'
# `gen_sign` 的实现参考认证一章
sign_headers = gen_sign('GET', prefix + url, query_param)
headers.update(sign_headers)
r = requests.request('GET', host + prefix + url + "?" + query_param, headers=headers)
print(r.json())
```



返回示例

```
[
  {
    "id": "1852454420",
    "text": "t-abc123",
    "amend_text": "-",
    "create_time": "1710488334",
    "update_time": "1710488334",
    "create_time_ms": 1710488334073,
    "update_time_ms": 1710488334074,
    "status": "closed",
    "currency_pair": "BTC_USDT",
    "type": "limit",
    "account": "unified",
    "side": "buy",
    "amount": "0.001",
    "price": "65000",
    "time_in_force": "gtc",
    "iceberg": "0",
    "left": "0",
    "filled_amount": "0.001",
    "fill_price": "63.4693",
    "filled_total": "63.4693",
    "avg_deal_price": "63469.3",
    "fee": "0.00000022",
    "fee_currency": "BTC",
    "point_fee": "0",
    "gt_fee": "0",
    "gt_maker_fee": "0",
    "gt_taker_fee": "0",
    "gt_discount": false,
    "rebated_fee": "0",
    "rebated_fee_currency": "USDT",
    "finish_as": "filled"
  }
]
```



#### 4.执行Lbank sdk测试demo，使用1USDT购买DOGE，将目标3中的SDK进行校验是否符合生产条件，有问题修复问题。

#### 5.执行Gate sdk测试demo，将Lbank sdk测试成功后，购买的DOGE，提现到Gate平台中，将目标4中的SDK进行校验是否符合生产条件，有问题修复问题。
#### 6.实现描述中的菜单列表功能，将如上两个平台的SDK,配合config.yaml文件，将整个项目功能串联成一个套利系统。
#### 7.每1秒查询一次TBC货币,是TBC不是BTC.他俩平台差异是否在0.2USDT,是则从lbank调用购买,再将购买到的TBC发送到gate平台（此处需要通过gate api查询我gate平台的TBC接收地址，若无法通过api获取收款地址，及时告知我，我可以将收款地址配置到配置文件中）
#### 8.进行5秒轮询一次，确定gate接收到TBC后，进行发起现货出售，换成USDT。
#### 9.将换到的USDT发送到lbank钱包中，此处接收链可以采用BSC链，进行转账。可以通过lbank秘钥获取接收钱包地址。（若无法通过api获取收款地址，及时告知我，我可以将收款地址配置到配置文件中）
#### 10.在lbank交易所收到USDT后再进行购买TBC，逻辑循环执行7~9步骤。从而达到lbank购买，在gate出售。
#### 11.整个交易过程，输出日志调理清晰，要时刻记录钱款变动记录到独立记录文档中，便于追溯哪个时间段，钱在哪个平台做什么事情。例如：
​    [2025-09-03 00:00:07:161][983819218]lbank-> 购买759 USDT的[TBC].
​    [2025-09-03 00:00:00:561][983819218]lbank-> 向gate 接收钱包地址（aNGAJJxxxxxxx)转出 100 [TBC]。
​    [2025-09-03 00:00:01:761][983819218]gate-> 接收到100 [TBC]。
​    [2025-09-03 00:00:02:161][983819218]gate-> 将100[TBC]挂单卖出，当前价格7.57 USDT，挂单成功。
​    [2025-09-03 00:00:03:161][983819218]gate-> 将100[TBC]挂单卖出，当前价格7.57 USDT，36.5交易完成。
​    [2025-09-03 00:00:04:161][983819218]gate-> 将100[TBC]挂单卖出，当前价格7.57 USDT，63.5交易完成。
​    [2025-09-03 00:00:05:161][983819218]gate-> 成功将100[TBC]挂单卖出，共计收益759 USDT.
​    [2025-09-03 00:00:06:161][983819218]gate-> 向lbank 接收钱包地址（0x000000000XXXX）转出759 USDT .
​    [2025-09-03 00:00:07:161][983819218]lbank-> 收到759 USDT .
​    [2025-09-03 00:00:07:161][983819219]lbank-> 购买759 USDT的[TBC].
​    ...
​    其中第一段[]内为日期，格式为yyyy-MM-dd HH:mm:ss:SSS，第二段[]是在lbank发起购买货币时，创建本次流水id，用于后续追溯使用，便于日志追溯。gate/lbank为两个平台，->后面的内容为事件。

#### 

### 要求及注意事项
1、代码要求调理清晰，架构轻便，注解完善，日志详细便于排查，该独立的重要信息独立文件存储。
2、执行日志也可以依旧打印，紧扣需求文档要求，不要太过于啰嗦与业务编程无关的内容，要有良好的编程习惯。
3、按照此文档的“目标”顺序挨个编写实现，并进行打√。
4、日志输出清晰，便于排查问题，代码注释编写清晰，便于review代码。
5、若必要时刻，可以使用小型的数据库进行存储重要信息。
6、严格保管我的“config.yaml”内容，不要泄露，仅在本项目中使用，他是我lbank和gate的api秘钥。



## 此处与业务无关的备注，往下内容请不要在读取，到此结束
### gate 必须的用主账号，子账号无法提现，并且把其他交易所钱包地址填入免验证再手动转一次账，首次可能会人脸验证。
### 